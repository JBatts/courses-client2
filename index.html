<body>
    <h1>Courses</h1>
    <form action="">
    <select name="list" id="list"></select>
    <div id="courseTarget">?</div>
    <button id="saveBtn">Save</button>
    <button id="deleteBtn">Delete</button>
    <button id="newBtn">Clear Form</button>
</form>
    <script>
        function render(data) {
            data.forEach(o => list.appendChild(new Option(o.courseName + " - #" + o.id, o.id)));
        }
        document.addEventListener("DOMContentLoaded", async () => {
            list.addEventListener("change", () => {
                const courseId = list.value;
                const course = data.find(o => o.id == courseId);
                const inputDate = new Date(course.startDate + " 2024");

                const year = inputDate.getFullYear();
                const month = (inputDate.getMonth() + 1).toString().padStart(2, "0");
                const day = inputDate.getDate().toString().padStart(2, "0");
                const formattedDate = `${year}-${month}-${day}`;

                courseTarget.innerHTML = `
                <label>Course ID: <br> <input value="${course.id}" id="courseId" readonly="readonly"></label><br>
                <label>Course Name: <br> <input value="${course.courseName}" id="courseName"></label><br>
                <label>Course Deparment: <br> <input value="${course.dept}" id="courseDept"></label><br>
                <label>Course Number: <br> <input type="number" value="${course.courseNum}" id="courseNum"></label><br>
                <label>Course Instructor: <br> <input value="${course.instructor}" id="instructor"></label><br>
                <label>Course Start Date: <br> <input type="date" value="${formattedDate}" id="startDate"></label><br>
                <label>Course Number of Days: <br> <input type="number" value="${course.numDays}" id="numDays"></label><br>
                `;
            }); // end change listener

            // Using .then() instead of async and await
            // fetch("http://localhost:8081/api/courses/", {
            //     method: "GET"
            // }).then(req => req.json()).then(render)

            // Using async and await instead of .then()
            const req = await fetch("http://localhost:8081/api/courses", {
                method: "GET"
            }); // get json text

            const data = await req.json(); // parse
            // Same as end of line 13
            render(data);

            window.data = data; // Make global var
            // Or
            // render(await req.json());
            // parse and then call render without data var

        }); // end load
    </script>
</body>